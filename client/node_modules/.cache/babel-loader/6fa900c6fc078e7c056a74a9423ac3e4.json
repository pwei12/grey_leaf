{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\User\\\\Documents\\\\jumpstart\\\\projects\\\\grey_leaf\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\jumpstart\\\\projects\\\\grey_leaf\\\\client\\\\src\\\\components\\\\ProductDetails\\\\ProductDetails.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Joi from \"joi-browser\";\nimport { Container, Row, Col, Image, Button } from \"react-bootstrap\";\nimport { getCartList, getProductById, addToCartList, togglePropInCart, updateProductList, getCartProductById } from \"../../services/productListService\";\n\nfunction ProductDetails(_ref) {\n  var match = _ref.match;\n  var product = getProductById(match.params.id);\n  var id = product.id,\n      name = product.name,\n      price = product.price,\n      description = product.description,\n      imageUrl = product.imageUrl,\n      inCart = product.inCart;\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      quantity = _useState2[0],\n      setQuantity = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      addedToCart = _useState4[0],\n      setAddedToCart = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  useEffect(function () {\n    if (getCartList().length > 0) {\n      var cartProduct = getCartProductById(id);\n\n      if (cartProduct) {\n        setQuantity(cartProduct.quantity);\n      }\n    }\n\n    setAddedToCart(inCart);\n  });\n  var schema = {\n    quantity: Joi.number().min(1).max(50).required()\n  };\n\n  var validateQuantity = function validateQuantity(value) {\n    var obj = {\n      quantity: value\n    };\n\n    var _Joi$validate = Joi.validate(obj, schema),\n        error = _Joi$validate.error;\n\n    return error ? error.details[0].message : null;\n  };\n\n  var handleQuantityChange = function handleQuantityChange(event) {\n    var inputQuantity = event.target.value;\n    var errorMsg = validateQuantity(inputQuantity);\n\n    if (errorMsg) {\n      setError(errorMsg);\n    } else {\n      setError(\"\");\n      setQuantity(parseInt(inputQuantity));\n    }\n  };\n\n  var handleAddToCart = function handleAddToCart(event) {\n    var updatedProductList = togglePropInCart(id);\n    updateProductList(updatedProductList);\n    addToCartList(id, quantity);\n    setAddedToCart(!inCart);\n  };\n\n  return React.createElement(Container, {\n    className: \"pb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(Row, {\n    className: \"justify-content-md-end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(Image, {\n    src: imageUrl,\n    thumbnail: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  })), React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    md: 8,\n    lg: 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, name), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"$\", \"\".concat(price.toFixed(2))), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, description), React.createElement(\"label\", {\n    htmlFor: \"quantity\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Quantity:\"), React.createElement(\"input\", {\n    id: \"quantity\",\n    type: \"number\",\n    onChange: handleQuantityChange,\n    value: quantity,\n    disabled: addedToCart,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), error && React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, error), React.createElement(Row, {\n    className: \"my-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"submit\",\n    onClick: handleAddToCart,\n    disabled: addedToCart,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, addedToCart ? \"Added to Cart\" : \"Add to Cart\"))), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/cart\",\n    className: \"text-white link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Go to Shopping Cart\")))))));\n}\n\nexport default ProductDetails;","map":{"version":3,"sources":["C:\\Users\\User\\Documents\\jumpstart\\projects\\grey_leaf\\client\\src\\components\\ProductDetails\\ProductDetails.jsx"],"names":["React","useState","useEffect","Link","Joi","Container","Row","Col","Image","Button","getCartList","getProductById","addToCartList","togglePropInCart","updateProductList","getCartProductById","ProductDetails","match","product","params","id","name","price","description","imageUrl","inCart","quantity","setQuantity","addedToCart","setAddedToCart","error","setError","length","cartProduct","schema","number","min","max","required","validateQuantity","value","obj","validate","details","message","handleQuantityChange","event","inputQuantity","target","errorMsg","parseInt","handleAddToCart","updatedProductList","toFixed"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Joi from \"joi-browser\";\r\nimport { Container, Row, Col, Image, Button } from \"react-bootstrap\";\r\nimport {\r\n  getCartList,\r\n  getProductById,\r\n  addToCartList,\r\n  togglePropInCart,\r\n  updateProductList,\r\n  getCartProductById\r\n} from \"../../services/productListService\";\r\n\r\nfunction ProductDetails({ match }) {\r\n  const product = getProductById(match.params.id);\r\n  const { id, name, price, description, imageUrl, inCart } = product;\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [addedToCart, setAddedToCart] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (getCartList().length > 0) {\r\n      const cartProduct = getCartProductById(id);\r\n      if (cartProduct) {\r\n        setQuantity(cartProduct.quantity);\r\n      }\r\n    }\r\n    setAddedToCart(inCart);\r\n  });\r\n\r\n  const schema = {\r\n    quantity: Joi.number().min(1).max(50).required()\r\n  }\r\n\r\n  const validateQuantity = value => {\r\n    const obj = { quantity: value };\r\n    const { error } = Joi.validate(obj, schema);\r\n    return error ? error.details[0].message : null;\r\n  };\r\n\r\n  const handleQuantityChange = event => {\r\n    const inputQuantity = event.target.value;\r\n    const errorMsg = validateQuantity(inputQuantity);\r\n    if(errorMsg) {\r\n      setError(errorMsg);\r\n    } else {\r\n      setError(\"\")\r\n      setQuantity(parseInt(inputQuantity));\r\n    }\r\n  };\r\n\r\n  const handleAddToCart = event => {\r\n    const updatedProductList = togglePropInCart(id);\r\n    updateProductList(updatedProductList);\r\n    addToCartList(id, quantity);\r\n    setAddedToCart(!inCart);\r\n  };\r\n\r\n  return (\r\n    <Container className=\"pb-5\">\r\n      <Row className=\"justify-content-md-end\">\r\n        <Col xs={12} sm={6} md={4} lg={4}>\r\n          <Image src={imageUrl} thumbnail />\r\n        </Col>\r\n        <Col xs={12} sm={6} md={8} lg={8}>\r\n          <h3>{name}</h3>\r\n          <p>${`${price.toFixed(2)}`}</p>\r\n          <p>{description}</p>\r\n\r\n          <label htmlFor=\"quantity\">Quantity:</label>\r\n          <input\r\n            id=\"quantity\"\r\n            type=\"number\"\r\n            onChange={handleQuantityChange}\r\n            value={quantity}\r\n            disabled={addedToCart}\r\n          />\r\n          {error && (<div className=\"alert alert-danger\">{error}</div>)}\r\n          <Row className=\"my-3\">\r\n            <Col>\r\n              <Button\r\n                type=\"submit\"\r\n                onClick={handleAddToCart}\r\n                disabled={addedToCart}\r\n              >\r\n                {addedToCart ? \"Added to Cart\" : \"Add to Cart\"}\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col>\r\n              <Button type=\"button\">\r\n                <Link to=\"/cart\" className=\"text-white link\">\r\n                  Go to Shopping Cart\r\n                </Link>\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default ProductDetails;\r\n"]},"metadata":{},"sourceType":"module"}